<!DOCTYPE html>
<html>
<head>
  <title>Premium Payment WebApp</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <style>
    body {
      margin-top: 150px;
      font-family: Arial, sans-serif;
      background: #0f1723;
      color: #fff;
      padding: 20px;
    }

    h2 { text-align: center; margin-bottom: 15px; }

    .box {
      background: #121a29;
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 20px;
      animation: fadeSlide 0.4s ease;
    }

    @keyframes fadeSlide {
      from { opacity: 0; transform: translateY(25px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .plan-btn {
      background: #1f2937;
      padding: 14px;
      border-radius: 8px;
      margin: 10px 0;
      cursor: pointer;
      text-align: center;
      font-size: 15px;
      transition: 0.3s;
    }

    .plan-btn:hover { background: #374151; transform: scale(1.03); }

    button {
      width: 100%;
      padding: 14px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      margin-top: 10px;
      transition: 0.3s;
    }

    button:hover { opacity: 0.9; }

    .ngn { background: #16a34a; color: #fff; }
    .usd { background: #2563eb; color: #fff; }
    .submit { background: #f59e0b; color: #000; }
    .back { background: #374151; color: #fff; }

    input {
      width: 100%;
      padding: 12px;
      margin-top: 10px;
      border-radius: 6px;
      border: none;
    }

    .hidden { display: none; }

    .info {
      background: #1f2937;
      padding: 12px;
      border-radius: 8px;
      margin: 10px 0;
      font-size: 14px;
    }

    .account-bold {
      font-size: 18px;
      font-weight: bold;
      color: #22c55e;
      text-align: center;
    }

    .preview {
      margin-top: 10px;
      text-align: center;
    }

    .preview img {
      max-width: 100%;
      border-radius: 10px;
      margin-top: 8px;
    }

    .success {
      background: #16a34a;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
      animation: pop 0.5s ease;
    }

    @keyframes pop {
      from { transform: scale(0.7); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    /* HIDE RAW ADDRESS COMPLETELY */
    .hidden-address {
      display: none;
    }

  </style>
</head>

<body>

<!-- ‚úÖ PLAN PAGE -->
<div class="box" id="planPage">
  <h2>üíé Premium Plan List</h2>

  <div class="plan-btn" onclick="choosePlan('Five Days Trial ‚Äî ‚Ç¶6,000 / $6')">5Ô∏è‚É£ Five Days ‚Äî ‚Ç¶6,000 ($6)</div>
  <div class="plan-btn" onclick="choosePlan('Two Weeks Trial ‚Äî ‚Ç¶10,000 / $10')">ü•à Two Weeks ‚Äî ‚Ç¶10,000 ($10)</div>
  <div class="plan-btn" onclick="choosePlan('One Month ‚Äî ‚Ç¶25,000 / $25')">ü•á One Month ‚Äî ‚Ç¶25,000 ($25)</div>
  <div class="plan-btn" onclick="choosePlan('One Year ‚Äî ‚Ç¶50,000 / $50')">üü† One Year ‚Äî ‚Ç¶50,000 ($50)</div>
  <div class="plan-btn" onclick="choosePlan('Forever ‚Äî ‚Ç¶100,000 / $100')">üèÜ Forever ‚Äî ‚Ç¶100,000 ($100)</div>
</div>

<!-- ‚úÖ METHOD -->
<div class="box hidden" id="methodPage">
  <h2>Select Payment Method</h2>
  <button class="ngn" onclick="showNGN()">Pay with NGN</button>
  <button class="usd" onclick="showUSD()">Pay with USD</button>
  <button class="back" onclick="goBack('plan')">‚¨Ö Back</button>
</div>

<!-- ‚úÖ NGN -->
<div class="box hidden" id="ngnPage">
  <h2>NGN Payment</h2>

  <div class="info">
    <b>Selected Plan:</b> <span id="ngnPlan"></span><br><br>
    Name: Olatunji Abdumalik Ayomide<br>
    Bank: Opay<br>
    Acc No: <div class="account-bold">9114301708</div>
  </div>

  <input type="file" id="ngnProof" accept="image/*" onchange="previewImage(this,'ngnPreview')">
  <div class="preview"><img id="ngnPreview"></div>

  <input type="text" id="ngnWhatsapp" placeholder="WhatsApp Number">
  <button class="submit" onclick="submitPayment('NGN')">Submit</button>
  <button class="back" onclick="goBack('method')">‚¨Ö Back</button>
</div>

<!-- ‚úÖ USD -->
<div class="box hidden" id="usdPage">
  <h2>USD Crypto Payment</h2>

  <div class="info">
    <b>Selected Plan:</b> <span id="usdPlan"></span><br><br>

    <!-- ‚úÖ TRUST WALLET PAYMENT BUTTON -->
    <a 
      href="https://link.trustwallet.com/send?coin=20000714&address=0xbBcc409872bC2441400735624638F3D67DAa7C4C"
      target="_blank"
      style="display:block;text-align:center;
             background:#2563eb;color:white;
             padding:12px;border-radius:8px;
             text-decoration:none;margin-top:10px;"
    >
      ‚úÖ Pay with Trust Wallet
    </a>

    <!-- ‚úÖ HIDDEN RAW ADDRESS (NOT VISIBLE) -->
    <div class="account-bold hidden-address">
      0xbBcc409872bC2441400735624638F3D67DAa7C4C
    </div>
  </div>

  <input type="file" id="usdProof" accept="image/*" onchange="previewImage(this,'usdPreview')">
  <div class="preview"><img id="usdPreview"></div>

  <input type="text" id="usdWhatsapp" placeholder="WhatsApp Number">
  <button class="submit" onclick="submitPayment('USD')">Submit</button>
  <button class="back" onclick="goBack('method')">‚¨Ö Back</button>
</div>

<!-- ‚úÖ SUCCESS -->
<div class="box hidden" id="successPage">
  <div class="success">
    ‚úÖ Payment Submitted Successfully!<br><br>
    Your payment has been received. Admin will review it within 24 hours.
    <p>
      If you submit a fake payment proof, your payment will be declined.  
      Contact  
<a 
  href="https://wa.me/2348121697423?text=Hello%20Admin%2C%20I%20paid%20for%20Premium%20and%20I%20would%20like%20to%20confirm%20my%20payment%20status.%20Thank%20you"
  target="_blank"
  rel="noopener"
  style="color:#fff;"
>
  Admin on WhatsApp
</a>
    </p>

    <button class="back" onclick="goBack('home')">‚¨Ö Back to Home</button>
  </div>
</div>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

const BOT_TOKEN = "7581641644:AAGgXu7h1T63-0UGYldM2uoPPjXnT-7o1aA";
const ADMIN_ID = "6976365864";

let selectedPlan = "";

function choosePlan(plan){
  selectedPlan = plan;
  showPage("methodPage");
  document.getElementById("ngnPlan").innerText = plan;
  document.getElementById("usdPlan").innerText = plan;
}

function showNGN(){ showPage("ngnPage"); }
function showUSD(){ showPage("usdPage"); }

function showPage(page){
  ["planPage","methodPage","ngnPage","usdPage","successPage"].forEach(id=>{
    document.getElementById(id).classList.add("hidden");
  });
  document.getElementById(page).classList.remove("hidden");
}

function goBack(where){
  if(where === "home") showPage("planPage");
  if(where === "method") showPage("methodPage");
  if(where === "plan") showPage("planPage");
}

function previewImage(input, previewId){
  const file = input.files[0];
  if(!file) return;
  const reader = new FileReader();
  reader.onload = () => document.getElementById(previewId).src = reader.result;
  reader.readAsDataURL(file);
}

async function submitPayment(type) {

  let whatsapp = type === "NGN"
    ? document.getElementById("ngnWhatsapp").value
    : document.getElementById("usdWhatsapp").value;

  let proof = type === "NGN"
    ? document.getElementById("ngnProof").files[0]
    : document.getElementById("usdProof").files[0];

  if (!whatsapp) {
    alert("Enter WhatsApp number");
    return;
  }

  if (!proof) {
    alert("Upload payment screenshot");
    return;
  }

  let user = tg.initDataUnsafe.user || {};

  let caption = `
‚úÖ NEW PREMIUM PAYMENT

üë§ Username: @${user.username || "Not Available"}
üÜî Telegram ID: ${user.id || "Not Available"}
üéÅ Plan: ${selectedPlan}
üí≥ Method: ${type}
üì± WhatsApp: ${whatsapp}

‚è≥ Awaiting approval.
  `;

  let formData = new FormData();
  formData.append("chat_id", ADMIN_ID);
  formData.append("photo", proof);
  formData.append("caption", caption);

  try {
    await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
      method: "POST",
      body: formData
    });

    await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        chat_id: user.id,
        text: "‚úÖ Payment received!\n\nYour payment has been submitted successfully and will be reviewed within 24 hours.\n\nIf you need any help, feel free to message the admin on WhatsApp:\nhttps://wa.me/2348121697423?text=Hello%20Admin%2C%20I%20paid%20for%20Premium%20and%20I%20would%20like%20to%20confirm%20my%20payment%20status.%20Thank%20you"

    showPage("successPage");

  } catch (err) {
    alert("‚ùå Upload failed. Check bot token & internet.");
  }
}
</script>

</body>
</html>